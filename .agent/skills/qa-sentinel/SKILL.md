---
name: qa-sentinel
description: Enforces quality and security by generating automated tests for RLS policies, workflows, and UI interactions. "If it's not tested, it's broken."
---

# QA Sentinel

## Context
This skill serves as the comprehensive quality assurance layer. It goes beyond simple functional testing to verify deep security constraints (RLS) and complex business process flows. It ensures that code works as expected and, crucially, that it *fails* securely when unauthorized actions are attempted.

## When to use this skill
- [ ] When validting new Supabase RLS policies.
- [ ] When a new feature or workflow step is implemented.
- [ ] When the user asks to "make sure this works" or "test this".
- [ ] When setting up the project's testing infrastructure.

## Instructions
1.  **Security Testing (RLS & Roles):**
    *   **Negative Testing is Mandatory:** Do not just test that the right user *can* do something; test that the wrong user *cannot*.
    *   **Scenario:** Attempt to Insert/Update/Delete with an incorrect role (e.g., "Technician tries to Approve an Order").
    *   **Expectation:** Assert that these attempts result in a `403 Forbidden` or RLS policy violation.
    *   **Tooling:** Generate SQL scripts (pgTAP) or integration tests utilizing Supabase Auth contexts.

2.  **Workflow Happy Path (E2E):**
    *   Generate End-to-End tests covering the full lifecycle of the core domain entity.
    *   **Flow:** Create -> Approve -> Schedule -> Execute -> Close.
    *   **Tooling:** Use **Playwright** for robust browser automation.

3.  **Data Strategy:**
    *   Collaborate with `riopaila-seeder`.
    *   Ensure tests cover edge cases by explicitly requesting specific data scenarios (e.g., "Seed a 'Suerte' with 0 area to test validation").

4.  **Tech Stack:**
    *   **Unit/Logic:** Vitest.
    *   **E2E/UI:** Playwright.

## Scripts & Tools
- No specific internal scripts. Relies on running standard npm/yarn test commands generated by the skill.

## Language
**LANGUAGE: SPANISH. All output, comments, and documentation MUST be in Spanish.**
